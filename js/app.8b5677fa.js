(function(t){function e(e){for(var n,o,l=e[0],c=e[1],s=e[2],u=0,f=[];u<l.length;u++)o=l[u],i[o]&&f.push(i[o][0]),i[o]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(t[n]=c[n]);d&&d(e);while(f.length)f.shift()();return r.push.apply(r,s||[]),a()}function a(){for(var t,e=0;e<r.length;e++){for(var a=r[e],n=!0,l=1;l<a.length;l++){var c=a[l];0!==i[c]&&(n=!1)}n&&(r.splice(e--,1),t=o(o.s=a[0]))}return t}var n={},i={app:0},r=[];function o(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=t,o.c=n,o.d=function(t,e,a){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)o.d(a,n,function(e){return t[e]}.bind(null,n));return a},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/mvsvue/";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],c=l.push.bind(l);l.push=e,l=l.slice();for(var s=0;s<l.length;s++)e(l[s]);var d=c;r.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},1802:function(t,e,a){},"56d7":function(t,e,a){"use strict";a.r(e);a("cadf"),a("551c"),a("097d");var n=a("2b0e"),i=a("8c4f"),r=a("bc79"),o=a.n(r),l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[t.authenticated?a("div",[a("v-app",[a("router-view",{attrs:{name:"appHeader"}}),a("br"),a("br"),a("br"),a("router-view",{staticClass:"mx-4",attrs:{name:"appMediaExplorer"}}),a("router-view",{attrs:{name:"appFooter"}})],1)],1):t._e(),a("router-view")],1)},c=[],s=(a("96cf"),a("3b8d")),d={name:"app",data:function(){return{authenticated:!1}},created:function(){this.isAuthenticated()},watch:{$route:"isAuthenticated"},methods:{isAuthenticated:function(){var t=Object(s["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$auth.isAuthenticated();case 2:this.authenticated=t.sent;case 3:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),logout:function(){var t=Object(s["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$auth.logout();case 2:return t.next=4,this.isAuthenticated();case 4:this.router.push({path:"/"});case 5:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()}},u=d,f=a("2877"),h=Object(f["a"])(u,l,c,!1,null,null,null);h.options.__file="App.vue";var p=h.exports,v=a("ce5b"),m=a.n(v),g=(a("d1e7"),a("bf40"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-toolbar",{attrs:{absolute:"","scroll-off-screen":"",color:"amber accent-4"}},[a("v-btn",{attrs:{icon:""},on:{click:t.resetPath}},[a("v-icon",[t._v("home")])],1),a("v-spacer"),a("v-toolbar-items",{staticClass:"hidden-sm-and-down"},[a("v-text-field",{staticClass:"mx-4 mt-2",attrs:{label:"Search tags...","hide-details":"",color:"black"}}),a("v-btn",{staticClass:"mx-4",attrs:{icon:""},on:{click:function(e){t.dialog=!0}}},[a("v-icon",[t._v("create_new_folder")])],1),a("v-btn",{staticClass:"mx-4",attrs:{flat:""}},[a("v-icon",{staticClass:"mr-2"},[t._v("cloud_upload")]),a("input",{staticStyle:{display:"none"},attrs:{id:"file",type:"file"},on:{change:function(e){t.uploadFile(e)}}}),a("label",{attrs:{for:"file"}},[t._v("Upload")])],1),a("v-btn",{staticClass:"mx-4",attrs:{flat:""}},[t._v("Sign Out")])],1)],1),a("v-dialog",{attrs:{width:"500"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",[a("v-card-title",{staticClass:"headline grey lighten-2",attrs:{"primary-title":""}},[t._v("Create new folder?")]),a("v-text-field",{staticClass:"ma-4",attrs:{label:"Enter folder name...","hide-details":"",color:"black"},model:{value:t.folderName,callback:function(e){t.folderName=e},expression:"folderName"}}),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"error",flat:""},on:{click:function(e){t.dialog=!1}}},[t._v("Cancel")]),a("v-btn",{attrs:{color:"success",flat:""},on:{click:t.createFolder}},[t._v("Create")])],1)],1)],1)],1)}),b=[],_=a("c64e"),w=a.n(_),x=(a("28a5"),a("a481"),a("f499")),k=a.n(x),y=(a("7f7f"),a("ac6a"),a("774e")),F=a.n(y),M=a("a745"),C=a.n(M),P=(a("7514"),a("2d7d")),E=a.n(P),A=new E.a,O={addOne:function(t){if(null==t.id){var e=this.getAll().find(function(e){return e.name===t.name});"undefined"===typeof e&&(t.id=w()(),t.isFolder=!0,A.set(t.id,t))}else A.set(t.id,t)},addMany:function(t){var e=this;if(!C()(t))throw new Error("The arg ".concat(t," is not an Array."));t.forEach(function(t){e.addOne(t)})},rename:function(t,e){this.getMediaForId(t).name=e},getAll:function(){return F()(A.values()).slice()},getAllForPath:function(t){return this.getAll().filter(function(e){return e.filePath===t})},getMediaForId:function(t){return A.get(t)},remove:function(t){A.delete(t)},removeAll:function(){A.clear()}},j=O,N=new n["default"]({data:{mediaService:j,path:"/",canNavigateUp:!1},methods:{add:function(t){j.addOne(t),this.emitEvent("mediaAdded")},addMany:function(t){j.addMany(t),this.emitEvent("mediaAdded")},rename:function(t,e){j.rename(t,e),this.emitEvent("mediaUpdated")},getAll:function(){j.getAll()},getAllForPath:function(t){return j.getAllForPath(t)},remove:function(t){j.remove(t),this.emitEvent("mediaRemoved")},pushToPath:function(t){this.path+=t,this.emitEvent("pathChanged")},popFromPath:function(){var t=N.path.split("/");t.splice(t.length-2,1),N.path=t.join("/"),this.emitEvent("pathChanged")},resetPath:function(){this.path="/",this.emitEvent("pathChanged")},emitEvent:function(t){this.$emit(t,j.getAllForPath(this.path))}}}),R=a("bc3a"),S="https://mvs-18-ws-spring-in-cloud.appspot.com",$=new n["default"]({data:{bearer:String,http:R},methods:{configureHttp:function(){var t=Object(s["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.t0=R,t.t1="Bearer ",t.next=4,this.$auth.getAccessToken();case 4:t.t2=t.sent,t.t3=t.t1.concat.call(t.t1,t.t2),t.t4={"Access-Control-Allow-Origin":"*","Content-Type":"application/json",Authorization:t.t3},t.t5={headers:t.t4},this.http=t.t0.create.call(t.t0,t.t5);case 9:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),getMediaForPath:function(t){var e="/folders/".concat(encodeURIComponent(t),"/media");this.http.get(S+e).then(function(e){e.data.subfolders&&e.data.subfolders.forEach(function(e){e.filePath=t,N.add(e)}),e.data.media.forEach(function(t){t.isFolder=!1,N.add(t)})})},getAllMediaForUser:function(){var t="/media";this.http.get(S+t).then(function(t){N.addMany(t.data)})},getMediaForId:function(t){var e="/media/".concat(t);this.http.get(S+e).then(function(t){return console.log(t.data)})},uploadMetadata:function(t){var e=this,a={};a.name=t.name,a.fileExtension=this.getExtension(t),a.filePath=N.path;var n="/media";this.http.post(S+n,k()(a)).then(function(a){e.postMedia(a.data.id,t)})},postMedia:function(t,e){var a=new FormData;a.append("file",e);var n="/media/".concat(t,"/upload");this.http.post(S+n,a).then(function(t){t.data.isFolder=!1,N.add(t.data)})},deleteMedia:function(t){var e="/media/".concat(t);this.http.delete(S+e).then(function(e){N.remove(t)})},downloadMedia:function(t,e){var n="/media/".concat(e,"/download");this.http.get(S+n,{responseType:"blob"}).then(function(e){var n=a("19de");n(e.data,t)})},updateMedia:function(t){var e="/media/".concat(t.id);t.fileExtension=this.getExtension(t),console.log(k()(t)),this.http.put(S+e,k()(t)).then(function(e){N.rename(t.id,t.name)})},getExtension:function(t){var e=t.name,a=e.replace(/[^.]/g,"").length;if(a<1)return"undefined";if(1===a)return"."+e.split(".").pop();var n=e.split(".");return"."+n[n.length-1]}}}),T={data:function(){return{dialog:!1,folderName:""}},methods:{uploadFile:function(t){var e=t.target.files[0];t.target.value="",$.uploadMetadata(e)},resetPath:function(){N.resetPath()},createFolder:function(){if(this.folderName){var t={id:w()(),name:this.folderName,isFolder:!0,filePath:N.path,tags:[],fileId:""};N.add(t)}this.dialog=!1}}},I=T,U=Object(f["a"])(I,g,b,!1,null,null,null);U.options.__file="Header.vue";var H=U.exports,B=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-footer",{staticClass:"pa-3 footer",attrs:{color:"amber accent-4"}},[a("v-spacer"),a("v-btn",{attrs:{icon:"",fixed:""},on:{click:t.goBack}},[a("v-icon",{attrs:{medium:""}},[t._v("arrow_back")])],1)],1)},z=[],D={data:function(){return{}},methods:{goBack:function(){N.canNavigateUp&&("/"===N.path?N.canNavigateUp=!1:N.popFromPath())}}},J=D,q=(a("c272"),Object(f["a"])(J,B,z,!1,null,null,null));q.options.__file="Footer.vue";var G=q.exports,K=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-container",{attrs:{fluid:""}},[a("v-layout",{attrs:{row:"",wrap:""}},t._l(t.mediaFiles,function(t){return a("v-flex",{key:t.id,staticClass:"my-4",attrs:{md3:"",xs12:""}},[a("app-media",{attrs:{name:t.name,id:t.id,filePath:t.filePath,fileId:t.fileId,isFolder:t.isFolder}})],1)}),1)],1)],1)},L=[],Q=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.isFolder?a("div",{staticClass:"text-xs-center"},[a("v-btn",{staticClass:"zoom",attrs:{icon:""},on:{click:function(e){t.navigateToFolder(t.name)}}},[a("v-icon",{attrs:{color:"blue darken-2",large:""}},[t._v("folder")])],1),a("p",{staticClass:"subheading font-weight-light"},[t._v(t._s(t.name))])],1):a("div",{staticClass:"text-xs-center"},[a("v-bottom-sheet",{model:{value:t.sheet,callback:function(e){t.sheet=e},expression:"sheet"}},[a("v-btn",{staticClass:"zoom",attrs:{slot:"activator",icon:""},slot:"activator"},[a("v-icon",{attrs:{color:"amber darken-1",large:""}},[t._v("insert_drive_file")])],1),a("v-list",[a("v-subheader",[t._v(t._s(t.name))]),a("v-list-tile",{on:{click:function(e){t.delegate("rename")}}},[a("v-list-tile-title",[t._v("Rename")])],1),a("v-list-tile",{on:{click:function(e){t.delegate("delete")}}},[a("v-list-tile-title",[t._v("Delete")])],1),a("v-list-tile",{on:{click:function(e){t.delegate("download")}}},[a("v-list-tile-title",[t._v("Download")])],1),a("v-list-tile",{on:{click:function(e){t.delegate("tag")}}},[a("v-list-tile-title",[t._v("Tag")])],1)],1)],1),a("p",{staticClass:"subheading font-weight-light"},[t._v(t._s(t.name))])],1),a("v-dialog",{attrs:{width:"500"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",[a("v-card-title",{staticClass:"headline grey lighten-2",attrs:{"primary-title":""}},[t._v("Rename Media")]),a("v-text-field",{staticClass:"ma-4",attrs:{label:"Change name","hide-details":"",color:"black"},model:{value:t.renamedName,callback:function(e){t.renamedName=e},expression:"renamedName"}}),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"error",flat:""},on:{click:function(e){t.dialog=!1}}},[t._v("Cancel\n                ")]),a("v-btn",{attrs:{color:"success",flat:""},on:{click:t.renameMedia}},[t._v("Rename\n                ")])],1)],1)],1)],1)},V=[],W={data:function(){return{hover:!1,sheet:!1,tag:String,dialog:!1,renamedName:""}},props:{id:String,filePath:String,fileId:String,name:String,isFolder:Boolean},methods:{addTag:function(t){this.tags.push(t)},removeTag:function(t){throw new Error("Not yet implemented")},delegate:function(t){switch(t){case"rename":this.dialog=!0;break;case"delete":$.deleteMedia(this.id);break;case"download":$.downloadMedia(this.name,this.id);break;case"tag":break}this.sheet=!1},navigateToFolder:function(t){N.canNavigateUp=!0,N.pushToPath("".concat(t,"/")),$.getMediaForPath(N.path)},renameMedia:function(){var t={};t.id=this.id,t.name=this.renamedName,t.filePath=this.filePath,t.fileId=this.fileId,$.updateMedia(t)}}},X=W,Y=(a("6741"),Object(f["a"])(X,Q,V,!1,null,null,null));Y.options.__file="Media.vue";var Z=Y.exports,tt={data:function(){return{mediaFiles:[],sheet:!1}},components:{"app-media":Z},methods:{},created:function(){var t=this;N.$on("mediaAdded",function(e){t.mediaFiles=e}),N.$on("pathChanged",function(e){t.mediaFiles=e}),N.$on("mediaRemoved",function(e){t.mediaFiles=e}),N.$on("mediaUpdated",function(e){t.mediaFiles=e})},beforeMount:function(){var t=Object(s["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,$.configureHttp();case 2:this.mediaFiles=$.getMediaForPath(N.path);case 3:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()},et=tt,at=Object(f["a"])(et,K,L,!1,null,"0bbd323a",null);at.options.__file="MediaExplorer.vue";var nt=at.exports,it=[{path:"/home",components:{appHeader:H,appMediaExplorer:nt,appFooter:G},meta:{requiresAuth:!0}},{path:"/implicit/callback",component:o.a.handleCallback()},{path:"",redirect:"/home"}],rt="/mvsvue/";n["default"].use(i["a"]),n["default"].use(o.a,{issuer:"https://dev-332680.oktapreview.com/oauth2/default",client_id:"0oahyyghlrI8poUre0h7",redirect_uri:window.location.origin+rt+"implicit/callback",scope:"openid profile email"});var ot=new i["a"]({routes:it,base:"/mvsvue/",mode:"history"});ot.beforeEach(n["default"].prototype.$auth.authRedirectGuard()),n["default"].use(m.a,{iconfont:"mdi"}),new n["default"]({el:"#app",router:ot,render:function(t){return t(p)}});e["default"]=ot},"5b9c":function(t,e,a){},6741:function(t,e,a){"use strict";var n=a("1802"),i=a.n(n);i.a},c272:function(t,e,a){"use strict";var n=a("5b9c"),i=a.n(n);i.a}});
//# sourceMappingURL=app.8b5677fa.js.map